<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zillow Property Search</title>
  <style>
    * { box-sizing: border-box; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0; 
      padding: 16px; 
      background: #f5f5f7;
    }
    .header {
      margin-bottom: 24px;
    }
    .search-title {
      font-size: 28px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 8px;
    }
    .search-subtitle {
      font-size: 16px;
      color: #666;
    }
    .filters-applied {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }
    .filter-tag {
      padding: 6px 12px;
      background: #e3f2fd;
      color: #1976d2;
      border-radius: 16px;
      font-size: 13px;
      font-weight: 500;
    }
    .properties-container { 
      display: grid; 
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); 
      gap: 20px;
    }
    .property-card { 
      background: white; 
      border-radius: 16px; 
      overflow: hidden; 
      box-shadow: 0 2px 8px rgba(0,0,0,0.08); 
      transition: all 0.3s ease;
      cursor: pointer;
      border: 2px solid transparent;
    }
    .property-card:hover { 
      transform: translateY(-4px); 
      box-shadow: 0 12px 24px rgba(0,0,0,0.15);
      border-color: #0066cc;
    }
    .property-image-container {
      position: relative;
      width: 100%;
      height: 220px;
      overflow: hidden;
      background: #e0e0e0;
    }
    .property-image { 
      width: 100%; 
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    .property-card:hover .property-image {
      transform: scale(1.05);
    }
    .listing-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      padding: 6px 12px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .listing-badge.for-sale {
      background: #4caf50;
    }
    .listing-badge.for-rent {
      background: #ff9800;
    }
    .property-info { 
      padding: 20px;
    }
    .property-price { 
      font-size: 28px; 
      font-weight: 800; 
      color: #0066cc;
      margin-bottom: 8px;
    }
    .property-address { 
      font-size: 15px; 
      color: #666; 
      margin-bottom: 16px;
      line-height: 1.4;
    }
    .property-details { 
      display: flex; 
      gap: 16px; 
      padding-top: 16px;
      border-top: 1px solid #f0f0f0;
    }
    .detail { 
      display: flex; 
      flex-direction: column;
      align-items: center;
      flex: 1;
    }
    .detail-icon {
      font-size: 20px;
      margin-bottom: 4px;
    }
    .detail-value { 
      font-weight: 700;
      font-size: 16px;
      color: #1a1a1a;
    }
    .detail-label {
      font-size: 11px;
      color: #999;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-top: 2px;
    }
    .property-type {
      display: inline-block;
      padding: 4px 10px;
      background: #f0f0f0;
      color: #666;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      text-transform: capitalize;
      margin-top: 12px;
    }
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }
    .empty-state-icon {
      font-size: 64px;
      margin-bottom: 16px;
      opacity: 0.5;
    }
    .empty-state-text {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script>
    (function() {
      const props = window.__WIDGET_PROPS__ || {};
      const { 
        properties = [], 
        location = 'Search Results', 
        totalResults = 0,
        filters = {},
        listingType = 'for-sale'
      } = props;
      
      const root = document.getElementById('root');
      
      // Header
      const header = document.createElement('div');
      header.className = 'header';
      
      let headerHTML = '<div class="search-title">' + location + '</div>';
      headerHTML += '<div class="search-subtitle">' + totalResults + ' properties found</div>';
      
      // Show applied filters
      const filterTags = [];
      if (filters.minPrice || filters.maxPrice) {
        const priceRange = filters.minPrice && filters.maxPrice 
          ? '$' + (filters.minPrice / 1000) + 'k - $' + (filters.maxPrice / 1000) + 'k'
          : filters.minPrice 
            ? 'Above $' + (filters.minPrice / 1000) + 'k'
            : 'Below $' + (filters.maxPrice / 1000) + 'k';
        filterTags.push(priceRange);
      }
      if (filters.bedrooms) filterTags.push(filters.bedrooms + '+ beds');
      if (filters.bathrooms) filterTags.push(filters.bathrooms + '+ baths');
      if (filters.propertyType) filterTags.push(filters.propertyType);
      
      if (filterTags.length > 0) {
        headerHTML += '<div class="filters-applied">';
        filterTags.forEach(tag => {
          headerHTML += '<span class="filter-tag">' + tag + '</span>';
        });
        headerHTML += '</div>';
      }
      
      header.innerHTML = headerHTML;
      root.appendChild(header);
      
      // Properties grid
      const container = document.createElement('div');
      container.className = 'properties-container';
      
      if (properties.length === 0) {
        container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üè†</div><div class="empty-state-text">No properties found</div><div>Try adjusting your search filters or exploring a different area.</div></div>';
      } else {
        properties.forEach(property => {
          const card = document.createElement('div');
          card.className = 'property-card';
          
          const badgeClass = property.listingType === 'for-rent' ? 'for-rent' : 'for-sale';
          const badgeText = property.listingType === 'for-rent' ? 'For Rent' : 'For Sale';
          
          card.innerHTML = '<div class="property-image-container"><img src="' + (property.imageUrl || 'https://via.placeholder.com/400x300?text=No+Image') + '" alt="' + property.address + '" class="property-image" onerror="this.src=\'https://via.placeholder.com/400x300?text=No+Image\'"><div class="listing-badge ' + badgeClass + '">' + badgeText + '</div></div><div class="property-info"><div class="property-price">$' + property.price.toLocaleString() + '</div><div class="property-address">' + property.address + '</div><div class="property-details"><div class="detail"><div class="detail-icon">üõèÔ∏è</div><div class="detail-value">' + property.bedrooms + '</div><div class="detail-label">Beds</div></div><div class="detail"><div class="detail-icon">üöø</div><div class="detail-value">' + property.bathrooms + '</div><div class="detail-label">Baths</div></div><div class="detail"><div class="detail-icon">üìê</div><div class="detail-value">' + property.sqft.toLocaleString() + '</div><div class="detail-label">Sq Ft</div></div></div><div class="property-type">' + (property.propertyType || 'house') + '</div></div>';
          
          card.addEventListener('click', () => {
            if (window.parent && window.parent.postMessage) {
              window.parent.postMessage({
                type: 'property-selected',
                data: { propertyId: property.id, address: property.address }
              }, '*');
            }
          });
          
          container.appendChild(card);
        });
      }
      
      root.appendChild(container);
    })();
  </script>
</body>
</html>

